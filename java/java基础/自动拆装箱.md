# 自动拆装箱
## 1
```
Integer i01=59;
int i02=59;
Integer i03=Integer.valueOf(59);
Integer i04=new Integer(59);
```
解析:
```
Byte,Short,Integer,Long,Character这5种整型的包装类也只是在对应值小于等于127并且大于等于-128时才可使用常量池，
因为他们至占用一个字节(-128~127)
```
**再者Integer.valueOf方法中也有判断，如果传递的整型变量>= -128并且小于127时会返回IntegerCache类中一个静态数组中的某一个对象， 否则会返回一个新的Integer对象,代码如下**
```
public static Integer valueOf(int i) {
        assert IntegerCache.high >= 127;
        if (i >= IntegerCache.low && i <= IntegerCache.high)
            return IntegerCache.cache[i + (-IntegerCache.low)];//使用静态数组
        return new Integer(i);//如果不在范围之内,就会创建一个新的对象
    }
```
```
public static void main(String[] args) {
         
        Integer a = 127;
        Integer b = 127;
         
        Integer c = 128;
        Integer d = 128;
         
        System.out.println(a == b);
        System.out.println(c == d);
    }
```
结合自动封装、常量池以及Integer.valueOf方法就不难得出，答案时true和false；
```
Integer i01=59;
int i02=59;
Integer i03=Integer.valueOf(59);
Integer i04=new Integer(59);
```
```
System.out.println(i01==i02);//正确
System.out.println(i01==i03);//正确，都指向IntegerCache[59-(-128)]对象
System.out.println(i03==i04);//错误，引用指向的对象地址不同
System.out.println(i02==i04);//正确
```
false的只有可能是地址不同,所以是两个对象的比较
## 2
```
Integer i = 42;
Long l = 42l;
Double d = 42.0;
```
```
(i == l)  (X)
(i == d)  (X) 
(l == d)  (X)  //前三个都是不同的引用类型,所以都是false 
i.equals(d)
d.equals(l)
i.equals(l)  //比较的对象地址,不同的对象
l.equals(42L) 会自动装箱，将 42L 装箱成 Long 类型，所以调用 equals 方法时，类型相同，且值也相同，因此返回真
```
```
1、基本型和封装型进行“==”运算符的比较，基本型封装型将会自动拆箱变为基本型后再进行比较，因此Integer(0)会自动拆箱为int类型再进行比较，显然返回true；

         int a = 220;

         Integer b = 220;

        System.out.println(a==b);//true
2、两个Integer类型进行“==”比较， 如果其值在-128至127  ，那么返回true，否则返回false, 这跟Integer.valueOf()的缓冲对象有关，这里不进行赘述。

        Integer c=3;
        Integer h=3;
        Integer e=321;
        Integer f=321;
        System.out.println(c==h);//true
        System.out.println(e==f);//false
3、两个基本型的封装型进行equals()比较，首先equals()会比较类型，如果类型相同，则继续比较值，如果值也相同，返回true。

        Integer a=1;
        Integer b=2;
        Integer c=3;
        System.out.println(c.equals(a+b));//true
4、基本型封装类型调用equals(),但是参数是基本类型，这时候，先会进行自动装箱，基本型转换为其封装类型，再进行3中的比较。  

        int i=1;
        int j = 2;
        Integer c=3;
        System.out.println(c.equals(i+j));//true
```